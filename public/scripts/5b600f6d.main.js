!function(){var a,b;a=this,a.PixelMob=Ember.Application.create(),PixelMob.SetToken=function(a){return $.ajaxSetup({beforeSend:function(b){return a?b.setRequestHeader("X-CSRF-Token",a):void 0}})},PixelMob.Alert=function(a,b,c){switch($(".container").prepend('<div id="flash"><button type="button"  data-dismiss="alert" class="close" >&times;</button><strong>'+a+" </strong>"+b+"</div>"),c){case"Warning":return $("#flash").attr("class","alert");case"Success":return $("#flash").attr("class","alert alert-success");case"Info":return $("#flash").attr("class","alert alert-info")}},PixelMob.CloseAlert=function(){return $("#flash").remove()},PixelMob.ReloadUser=function(a){return $.get("/api/user/current_user",function(a){var b;return null!==a?(b=PixelMob.User.find(a.user.id),PixelMob.current_user=b,PixelMob.__container__.lookup("controller:currentUser").set("content",b),PixelMob.__container__.lookup("controller:application").set("force",Math.random())):(PixelMob.current_user=null,PixelMob.__container__.lookup("controller:currentUser").set("content",null),PixelMob.__container__.lookup("controller:application").set("force",Math.random()))},"json")},Ember.Application.initializer({name:"currentUser",initialize:function(){return PixelMob.ReloadUser(),$.ajaxSetup({beforeSend:function(){}})}},b=$('meta[name="csrf-token"]').attr("content"),b?xhr.setRequestHeader("X-CSRF-Token",b):void 0)}.call(this),function(){PixelMob.Router.reopen({location:"history"}),PixelMob.Router.map(function(){return this.resource("videos",{path:"/videos"}),this.resource("videos",{path:"/v"}),this.resource("video",{path:"/videos/:video_id"}),this.resource("video",{path:"/v/:video_id"}),this.resource("edit_video",{path:"/v/:video_id/e"}),this.resource("edit_video",{path:"/videos/:video_id/edit"}),this.resource("channel",{path:"/c/:channel_id"}),this.resource("channel",{path:"/channels/:channel_id"}),this.resource("upload_file",{path:"/upload"}),this.resource("new_channel",{path:"/channels/new"}),this.resource("signin",{path:"/signin"}),this.resource("signoff",{path:"/signoff"}),this.resource("subscriptions",{path:"/subscriptions"}),this.resource("subscriptions",{path:"/"}),this.resource("video_search",{path:"/v/s/:search"}),this.resource("game",{path:"/g/:game_id"}),this.resource("game",{path:"/games/:game_id"},this.route("pagenotfound"),{path:"*:"},this.resource("signup"),{path:"/singup"},this.resource("dashboard"),{path:"/dashboard"})})}.call(this),function(){PixelMob.Store=DS.Store.extend({revision:12,adapter:DS.RESTAdapter.extend({serializer:DS.RESTSerializer({init:function(){return this._super(),this.map("PixelMob.User",{regions:{embedded:"always"}})}})})}),DS.RESTAdapter.reopen({namespace:"api"})}.call(this);